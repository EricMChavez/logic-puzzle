import type { PuzzleDefinition } from '../types.ts';

export const INVERTER: PuzzleDefinition = {
  id: 'inverter',
  title: 'Inverter',
  description: 'Flip the polarity of the input waveform',
  activeInputs: 1,
  activeOutputs: 1,
  allowedNodes: [],
  testCases: [
    {
      name: 'Inverter',
      inputs: [
        {
          shape: 'sawtooth-half',
          amplitude: 100,
          period: 128,
          phase: 0,
          offset: 0,
        }
      ],
      expectedOutputs: [
        {
          shape: 'samples',
          amplitude: 100,
          period: 256,
          phase: 0,
          offset: 0,
          samples: [9.38, 7.81, 6.25, 4.69, 3.13, 1.56, 0, -1.56, -3.12, -4.69, -6.25, -7.81, -9.37, -10.94, -12.5, -14.06, -15.62, -17.19, -18.75, -20.31, -21.87, -23.44, -25, -26.56, -28.12, -29.69, -31.25, -32.81, -34.37, -35.94, -37.5, -39.06, -40.62, -42.19, -43.75, -45.31, -46.87, -48.44, -50, -51.56, -53.12, -54.69, -56.25, -57.81, -59.37, -60.94, -62.5, -64.06, -65.62, -67.19, -68.75, -70.31, -71.87, -73.44, -75, -76.56, -78.12, -79.69, -81.25, -82.81, -84.37, -85.94, -87.5, -89.06, -90.62, -92.19, -93.75, -95.31, -96.87, -98.44, 100, 98.44, 96.88, 95.31, 93.75, 92.19, 90.63, 89.06, 87.5, 85.94, 84.38, 82.81, 81.25, 79.69, 78.13, 76.56, 75, 73.44, 71.88, 70.31, 68.75, 67.19, 65.63, 64.06, 62.5, 60.94, 59.38, 57.81, 56.25, 54.69, 53.13, 51.56, 50, 48.44, 46.88, 45.31, 43.75, 42.19, 40.63, 39.06, 37.5, 35.94, 34.38, 32.81, 31.25, 29.69, 28.13, 26.56, 25, 23.44, 21.88, 20.31, 18.75, 17.19, 15.63, 14.06, 12.5, 10.94, 9.38, 7.81, 6.25, 4.69, 3.13, 1.56, 0, -1.56, -3.12, -4.69, -6.25, -7.81, -9.37, -10.94, -12.5, -14.06, -15.62, -17.19, -18.75, -20.31, -21.87, -23.44, -25, -26.56, -28.12, -29.69, -31.25, -32.81, -34.37, -35.94, -37.5, -39.06, -40.62, -42.19, -43.75, -45.31, -46.87, -48.44, -50, -51.56, -53.12, -54.69, -56.25, -57.81, -59.37, -60.94, -62.5, -64.06, -65.62, -67.19, -68.75, -70.31, -71.87, -73.44, -75, -76.56, -78.12, -79.69, -81.25, -82.81, -84.37, -85.94, -87.5, -89.06, -90.62, -92.19, -93.75, -95.31, -96.87, -98.44, 100, 98.44, 96.88, 95.31, 93.75, 92.19, 90.63, 89.06, 87.5, 85.94, 84.38, 82.81, 81.25, 79.69, 78.13, 76.56, 75, 73.44, 71.88, 70.31, 68.75, 67.19, 65.63, 64.06, 62.5, 60.94, 59.38, 57.81, 56.25, 54.69, 53.13, 51.56, 50, 48.44, 46.88, 45.31, 43.75, 42.19, 40.63, 39.06, 37.5, 35.94, 34.38, 32.81, 31.25, 29.69, 28.13, 26.56, 25, 23.44, 21.88, 20.31, 18.75, 17.19, 15.63, 14.06, 12.5, 10.94],
        }
      ],
    },
  ],
  connectionPoints: {
    left: [
      { active: false, direction: 'input' },
      { active: true, direction: 'input', cpIndex: 0 },
      { active: false, direction: 'input' },
    ],
    right: [
      { active: false, direction: 'input' },
      { active: true, direction: 'output', cpIndex: 0 },
      { active: false, direction: 'input' },
    ],
  },
  initialNodes: [
    { id: 'c949b8a9-354f-400f-824c-411af757c4bd', type: 'inverter', position: { col: 30, row: 10 }, params: {}, inputCount: 1, outputCount: 1 },
  ],
};

export const POLARIZER: PuzzleDefinition = {
  id: 'polarizer',
  title: 'Polarizer',
  description: 'Transform the input sine wave into a square wave',
  activeInputs: 1,
  activeOutputs: 1,
  allowedNodes: ['inverter'],
  testCases: [
    {
      name: 'Polarizer',
      inputs: [
        {
          shape: 'sine-quarter',
          amplitude: 100,
          period: 64,
          phase: 0,
          offset: 0,
        }
      ],
      expectedOutputs: [
        {
          shape: 'samples',
          amplitude: 100,
          period: 256,
          phase: 0,
          offset: 0,
          samples: [100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, -100, -100, -100, -100, -100, -100, -100, -100, -100, -100, -100, -100, -100, -100, -100, -100, -100, -100, -100, -100, -100, -100, -100, -100, -100, -100, -100, -100, -100, -100, -100, 0, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, -100, -100, -100, -100, -100, -100, -100, -100, -100, -100, -100, -100, -100, -100, -100, -100, -100, -100, -100, -100, -100, -100, -100, -100, -100, -100, -100, -100, -100, -100, -100, 0, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, -100, -100, -100, -100, -100, -100, -100, -100, -100, -100, -100, -100, -100, -100, -100, -100, -100, -100, -100, -100, -100, -100, -100, -100, -100, -100, -100, -100, -100, -100, -100, 0, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, -100, -100, -100, -100, -100, -100, -100, -100, -100, -100, -100, -100, -100, -100, -100, -100, -100, -100, -100, -100, -100, -100, -100, -100, -100, -100, -100, -100, -100, -100, -100, 0],
        }
      ],
    },
  ],
  connectionPoints: {
    left: [
      { active: false, direction: 'input' },
      { active: true, direction: 'input', cpIndex: 0 },
      { active: false, direction: 'input' },
    ],
    right: [
      { active: false, direction: 'input' },
      { active: true, direction: 'output', cpIndex: 0 },
      { active: false, direction: 'input' },
    ],
  },
  initialNodes: [
    { id: '998cdef2-03cd-41c0-8307-92e285671179', type: 'polarizer', position: { col: 30, row: 10 }, params: {}, inputCount: 1, outputCount: 1 },
  ],
};

export const MIXER: PuzzleDefinition = {
  id: 'mixer',
  title: 'Mixer',
  description: 'Combine the two input waveforms',
  activeInputs: 2,
  activeOutputs: 1,
  allowedNodes: ['inverter', 'polarizer'],
  testCases: [
    {
      name: 'Mixer',
      inputs: [
        {
          shape: 'triangle-half',
          amplitude: 100,
          period: 128,
          phase: 0,
          offset: 0,
        },
        {
          shape: 'triangle-quarter',
          amplitude: 100,
          period: 64,
          phase: 0,
          offset: 0,
        }
      ],
      expectedOutputs: [
        {
          shape: 'samples',
          amplitude: 100,
          period: 256,
          phase: 0,
          offset: 0,
          samples: [12.5, 17.19, 21.88, 26.56, 31.25, 35.94, 40.63, 45.31, 50, 48.44, 46.88, 45.31, 43.75, 42.19, 40.63, 39.06, 37.5, 35.94, 34.38, 32.81, 31.25, 29.69, 28.13, 26.56, 25, 23.44, 21.88, 20.31, 18.75, 17.19, 15.63, 14.06, 12.5, 10.94, 9.38, 7.81, 6.25, 4.69, 3.13, 1.56, 0, 1.56, 3.13, 4.69, 6.25, 7.81, 9.38, 10.94, 12.5, 14.06, 15.63, 17.19, 18.75, 20.31, 21.88, 23.44, 25, 26.56, 28.13, 29.69, 31.25, 32.81, 34.38, 35.94, 37.5, 39.06, 40.63, 42.19, 43.75, 45.31, 46.88, 48.44, 50, 45.31, 40.63, 35.94, 31.25, 26.56, 21.88, 17.19, 12.5, 7.81, 3.13, -1.56, -6.25, -10.94, -15.62, -20.31, -25, -29.69, -34.37, -39.06, -43.75, -48.44, -53.12, -57.81, -62.5, -67.19, -71.87, -76.56, -81.25, -85.94, -90.62, -95.31, -100, -95.31, -90.62, -85.94, -81.25, -76.56, -71.87, -67.19, -62.5, -57.81, -53.12, -48.44, -43.75, -39.06, -34.37, -29.69, -25, -20.31, -15.62, -10.94, -6.25, -1.56, 3.13, 7.81, 12.5, 17.19, 21.88, 26.56, 31.25, 35.94, 40.63, 45.31, 50, 48.44, 46.88, 45.31, 43.75, 42.19, 40.63, 39.06, 37.5, 35.94, 34.38, 32.81, 31.25, 29.69, 28.13, 26.56, 25, 23.44, 21.88, 20.31, 18.75, 17.19, 15.63, 14.06, 12.5, 10.94, 9.38, 7.81, 6.25, 4.69, 3.13, 1.56, 0, 1.56, 3.13, 4.69, 6.25, 7.81, 9.38, 10.94, 12.5, 14.06, 15.63, 17.19, 18.75, 20.31, 21.88, 23.44, 25, 26.56, 28.13, 29.69, 31.25, 32.81, 34.38, 35.94, 37.5, 39.06, 40.63, 42.19, 43.75, 45.31, 46.88, 48.44, 50, 45.31, 40.63, 35.94, 31.25, 26.56, 21.88, 17.19, 12.5, 7.81, 3.13, -1.56, -6.25, -10.94, -15.62, -20.31, -25, -29.69, -34.37, -39.06, -43.75, -48.44, -53.12, -57.81, -62.5, -67.19, -71.87, -76.56, -81.25, -85.94, -90.62, -95.31, -100, -95.31, -90.62, -85.94, -81.25, -76.56, -71.87, -67.19, -62.5, -57.81, -53.12, -48.44, -43.75, -39.06, -34.37, -29.69, -25, -20.31, -15.62, -10.94, -6.25, -1.56, 3.13, 7.81],
        }
      ],
    },
  ],
  connectionPoints: {
    left: [
      { active: true, direction: 'input', cpIndex: 0 },
      { active: false, direction: 'input' },
      { active: true, direction: 'input', cpIndex: 1 },
    ],
    right: [
      { active: false, direction: 'input' },
      { active: true, direction: 'output', cpIndex: 0 },
      { active: false, direction: 'input' },
    ],
  },
  initialNodes: [
    { id: 'f84cb97f-53f3-4e7d-8a26-b641a5705f6d', type: 'mixer', position: { col: 30, row: 10 }, params: {"mix":0}, inputCount: 3, outputCount: 1 },
  ],
};

export const AMP: PuzzleDefinition = {
  id: 'amp',
  title: 'Amp',
  description: 'Combine the two input waveforms and amplify',
  activeInputs: 2,
  activeOutputs: 1,
  allowedNodes: ['inverter', 'polarizer', 'mixer'],
  testCases: [
    {
      name: 'Amp',
      inputs: [
        {
          shape: 'square-half-reduced',
          amplitude: 100,
          period: 128,
          phase: 0,
          offset: 0,
        },
        {
          shape: 'triangle-half-reduced',
          amplitude: 100,
          period: 128,
          phase: 0,
          offset: 0,
        }
      ],
      expectedOutputs: [
        {
          shape: 'samples',
          amplitude: 100,
          period: 256,
          phase: 0,
          offset: 0,
          samples: [-1.56, -3.12, -4.69, -6.25, -7.81, -9.37, -10.94, -12.5, -14.06, -15.62, -17.19, -18.75, -20.31, -21.87, -23.44, -25, -26.56, -28.12, -29.69, -31.25, -32.81, -34.37, -35.94, -37.5, -39.06, -40.62, -42.19, -43.75, -45.31, -46.87, -48.44, -50, -51.56, -53.12, -54.69, -56.25, -57.81, -59.37, -60.94, -62.5, -64.06, -65.62, -67.19, -68.75, -70.31, -71.87, -73.44, -75, -76.56, -78.12, -79.69, -81.25, -82.81, -84.37, -85.94, -87.5, -89.06, -90.62, -92.19, -93.75, -95.31, -96.87, -98.44, 0, 1.56, 3.13, 4.69, 6.25, 7.81, 9.38, 10.94, 12.5, 14.06, 15.63, 17.19, 18.75, 20.31, 21.88, 23.44, 25, 26.56, 28.13, 29.69, 31.25, 32.81, 34.38, 35.94, 37.5, 39.06, 40.63, 42.19, 43.75, 45.31, 46.88, 48.44, 50, 51.56, 53.13, 54.69, 56.25, 57.81, 59.38, 60.94, 62.5, 64.06, 65.63, 67.19, 68.75, 70.31, 71.88, 73.44, 75, 76.56, 78.13, 79.69, 81.25, 82.81, 84.38, 85.94, 87.5, 89.06, 90.63, 92.19, 93.75, 95.31, 96.88, 98.44, 0, -1.56, -3.12, -4.69, -6.25, -7.81, -9.37, -10.94, -12.5, -14.06, -15.62, -17.19, -18.75, -20.31, -21.87, -23.44, -25, -26.56, -28.12, -29.69, -31.25, -32.81, -34.37, -35.94, -37.5, -39.06, -40.62, -42.19, -43.75, -45.31, -46.87, -48.44, -50, -51.56, -53.12, -54.69, -56.25, -57.81, -59.37, -60.94, -62.5, -64.06, -65.62, -67.19, -68.75, -70.31, -71.87, -73.44, -75, -76.56, -78.12, -79.69, -81.25, -82.81, -84.37, -85.94, -87.5, -89.06, -90.62, -92.19, -93.75, -95.31, -96.87, -98.44, 0, 1.56, 3.13, 4.69, 6.25, 7.81, 9.38, 10.94, 12.5, 14.06, 15.63, 17.19, 18.75, 20.31, 21.88, 23.44, 25, 26.56, 28.13, 29.69, 31.25, 32.81, 34.38, 35.94, 37.5, 39.06, 40.63, 42.19, 43.75, 45.31, 46.88, 48.44, 50, 51.56, 53.13, 54.69, 56.25, 57.81, 59.38, 60.94, 62.5, 64.06, 65.63, 67.19, 68.75, 70.31, 71.88, 73.44, 75, 76.56, 78.13, 79.69, 81.25, 82.81, 84.38, 85.94, 87.5, 89.06, 90.63, 92.19, 93.75, 95.31, 96.88, 98.44, 0],
        }
      ],
    },
  ],
  connectionPoints: {
    left: [
      { active: true, direction: 'input', cpIndex: 0 },
      { active: false, direction: 'input' },
      { active: true, direction: 'input', cpIndex: 1 },
    ],
    right: [
      { active: false, direction: 'input' },
      { active: true, direction: 'output', cpIndex: 0 },
      { active: false, direction: 'input' },
    ],
  },
  initialNodes: [
    { id: '8dfc423b-9062-42e2-9593-f5783e6a75b3', type: 'amp', position: { col: 30, row: 10 }, params: {"gain":0}, inputCount: 2, outputCount: 1 },
  ],
};

export const SHIFTER: PuzzleDefinition = {
  id: 'shifter',
  title: 'Shifter',
  description: 'Reduce the amplitude of the input waveform then shift to positive polarity',
  activeInputs: 1,
  activeOutputs: 1,
  allowedNodes: ['inverter', 'polarizer', 'amp', 'mixer'],
  testCases: [
    {
      name: 'Shifter',
      inputs: [
        {
          shape: 'sine-quarter',
          amplitude: 100,
          period: 64,
          phase: 0,
          offset: 0,
        }
      ],
      expectedOutputs: [
        {
          shape: 'samples',
          amplitude: 100,
          period: 256,
          phase: 0,
          offset: 0,
          samples: [59.75, 64.51, 69.13, 73.57, 77.78, 81.72, 85.36, 88.65, 91.57, 94.1, 96.19, 97.85, 99.04, 99.76, 100, 99.76, 99.04, 97.85, 96.19, 94.1, 91.57, 88.65, 85.36, 81.72, 77.78, 73.57, 69.13, 64.51, 59.75, 54.9, 50, 45.1, 40.25, 35.49, 30.87, 26.43, 22.22, 18.28, 14.64, 11.35, 8.43, 5.9, 3.81, 2.15, 0.96, 0.24, 0, 0.24, 0.96, 2.15, 3.81, 5.9, 8.43, 11.35, 14.64, 18.28, 22.22, 26.43, 30.87, 35.49, 40.25, 45.1, 50, 54.9, 59.75, 64.51, 69.13, 73.57, 77.78, 81.72, 85.36, 88.65, 91.57, 94.1, 96.19, 97.85, 99.04, 99.76, 100, 99.76, 99.04, 97.85, 96.19, 94.1, 91.57, 88.65, 85.36, 81.72, 77.78, 73.57, 69.13, 64.51, 59.75, 54.9, 50, 45.1, 40.25, 35.49, 30.87, 26.43, 22.22, 18.28, 14.64, 11.35, 8.43, 5.9, 3.81, 2.15, 0.96, 0.24, 0, 0.24, 0.96, 2.15, 3.81, 5.9, 8.43, 11.35, 14.64, 18.28, 22.22, 26.43, 30.87, 35.49, 40.25, 45.1, 50, 54.9, 59.75, 64.51, 69.13, 73.57, 77.78, 81.72, 85.36, 88.65, 91.57, 94.1, 96.19, 97.85, 99.04, 99.76, 100, 99.76, 99.04, 97.85, 96.19, 94.1, 91.57, 88.65, 85.36, 81.72, 77.78, 73.57, 69.13, 64.51, 59.75, 54.9, 50, 45.1, 40.25, 35.49, 30.87, 26.43, 22.22, 18.28, 14.64, 11.35, 8.43, 5.9, 3.81, 2.15, 0.96, 0.24, 0, 0.24, 0.96, 2.15, 3.81, 5.9, 8.43, 11.35, 14.64, 18.28, 22.22, 26.43, 30.87, 35.49, 40.25, 45.1, 50, 54.9, 59.75, 64.51, 69.13, 73.57, 77.78, 81.72, 85.36, 88.65, 91.57, 94.1, 96.19, 97.85, 99.04, 99.76, 100, 99.76, 99.04, 97.85, 96.19, 94.1, 91.57, 88.65, 85.36, 81.72, 77.78, 73.57, 69.13, 64.51, 59.75, 54.9, 50, 45.1, 40.25, 35.49, 30.87, 26.43, 22.22, 18.28, 14.64, 11.35, 8.43, 5.9, 3.81, 2.15, 0.96, 0.24, 0, 0.24, 0.96, 2.15, 3.81, 5.9, 8.43, 11.35, 14.64, 18.28, 22.22, 26.43, 30.87, 35.49, 40.25, 45.1, 50, 54.9],
        }
      ],
    },
  ],
  connectionPoints: {
    left: [
      { active: false, direction: 'input' },
      { active: false, direction: 'input' },
      { active: true, direction: 'input', cpIndex: 0 },
    ],
    right: [
      { active: true, direction: 'output', cpIndex: 0 },
      { active: false, direction: 'input' },
      { active: false, direction: 'input' },
    ],
  },
  initialNodes: [
    { id: '5a680db7-3357-482c-8463-80f5bbd46ae2', type: 'shifter', position: { col: 30, row: 10 }, params: {"shift":0}, inputCount: 2, outputCount: 1 },
  ],
};


export const DIVERTER: PuzzleDefinition = {
  id: 'diverter',
  title: 'Diverter',
  description: 'Clip(amplify) the input waveform then diverter into two outputs',
  activeInputs: 1,
  activeOutputs: 2,
  allowedNodes: ['inverter', 'polarizer', 'mixer', 'amp', 'shifter'],
  testCases: [
    {
      name: 'Diverter',
      inputs: [
        {
          shape: 'triangle-quarter',
          amplitude: 100,
          period: 64,
          phase: 0,
          offset: 0,
        }
      ],
      expectedOutputs: [
        {
          shape: 'samples',
          amplitude: 100,
          period: 256,
          phase: 0,
          offset: 0,
          samples: [-2.34, -4.69, -7.03, -9.37, -11.72, -14.06, -16.41, -18.75, -21.09, -23.44, -25, -25, -25, -25, -25, -25, -25, -25, -25, -25, -25, -23.44, -21.09, -18.75, -16.41, -14.06, -11.72, -9.37, -7.03, -4.69, -2.34, 0, 2.34, 4.69, 7.03, 9.38, 11.72, 14.06, 16.41, 18.75, 21.09, 23.44, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 23.44, 21.09, 18.75, 16.41, 14.06, 11.72, 9.38, 7.03, 4.69, 2.34, 0, -2.34, -4.69, -7.03, -9.37, -11.72, -14.06, -16.41, -18.75, -21.09, -23.44, -25, -25, -25, -25, -25, -25, -25, -25, -25, -25, -25, -23.44, -21.09, -18.75, -16.41, -14.06, -11.72, -9.37, -7.03, -4.69, -2.34, 0, 2.34, 4.69, 7.03, 9.38, 11.72, 14.06, 16.41, 18.75, 21.09, 23.44, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 23.44, 21.09, 18.75, 16.41, 14.06, 11.72, 9.38, 7.03, 4.69, 2.34, 0, -2.34, -4.69, -7.03, -9.37, -11.72, -14.06, -16.41, -18.75, -21.09, -23.44, -25, -25, -25, -25, -25, -25, -25, -25, -25, -25, -25, -23.44, -21.09, -18.75, -16.41, -14.06, -11.72, -9.37, -7.03, -4.69, -2.34, 0, 2.34, 4.69, 7.03, 9.38, 11.72, 14.06, 16.41, 18.75, 21.09, 23.44, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 23.44, 21.09, 18.75, 16.41, 14.06, 11.72, 9.38, 7.03, 4.69, 2.34, 0, -2.34, -4.69, -7.03, -9.37, -11.72, -14.06, -16.41, -18.75, -21.09, -23.44, -25, -25, -25, -25, -25, -25, -25, -25, -25, -25, -25, -23.44, -21.09, -18.75, -16.41, -14.06, -11.72, -9.37, -7.03, -4.69, -2.34, 0, 2.34, 4.69, 7.03, 9.38, 11.72, 14.06, 16.41, 18.75, 21.09, 23.44, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 23.44, 21.09, 18.75, 16.41, 14.06, 11.72, 9.38, 7.03, 4.69, 2.34, 0],
        },
        {
          shape: 'samples',
          amplitude: 100,
          period: 256,
          phase: 0,
          offset: 0,
          samples: [-7.03, -14.06, -21.09, -28.12, -35.16, -42.19, -49.22, -56.25, -63.28, -70.31, -75, -75, -75, -75, -75, -75, -75, -75, -75, -75, -75, -70.31, -63.28, -56.25, -49.22, -42.19, -35.16, -28.12, -21.09, -14.06, -7.03, 0, 7.03, 14.06, 21.09, 28.13, 35.16, 42.19, 49.22, 56.25, 63.28, 70.31, 75, 75, 75, 75, 75, 75, 75, 75, 75, 75, 75, 70.31, 63.28, 56.25, 49.22, 42.19, 35.16, 28.13, 21.09, 14.06, 7.03, 0, -7.03, -14.06, -21.09, -28.12, -35.16, -42.19, -49.22, -56.25, -63.28, -70.31, -75, -75, -75, -75, -75, -75, -75, -75, -75, -75, -75, -70.31, -63.28, -56.25, -49.22, -42.19, -35.16, -28.12, -21.09, -14.06, -7.03, 0, 7.03, 14.06, 21.09, 28.13, 35.16, 42.19, 49.22, 56.25, 63.28, 70.31, 75, 75, 75, 75, 75, 75, 75, 75, 75, 75, 75, 70.31, 63.28, 56.25, 49.22, 42.19, 35.16, 28.13, 21.09, 14.06, 7.03, 0, -7.03, -14.06, -21.09, -28.12, -35.16, -42.19, -49.22, -56.25, -63.28, -70.31, -75, -75, -75, -75, -75, -75, -75, -75, -75, -75, -75, -70.31, -63.28, -56.25, -49.22, -42.19, -35.16, -28.12, -21.09, -14.06, -7.03, 0, 7.03, 14.06, 21.09, 28.13, 35.16, 42.19, 49.22, 56.25, 63.28, 70.31, 75, 75, 75, 75, 75, 75, 75, 75, 75, 75, 75, 70.31, 63.28, 56.25, 49.22, 42.19, 35.16, 28.13, 21.09, 14.06, 7.03, 0, -7.03, -14.06, -21.09, -28.12, -35.16, -42.19, -49.22, -56.25, -63.28, -70.31, -75, -75, -75, -75, -75, -75, -75, -75, -75, -75, -75, -70.31, -63.28, -56.25, -49.22, -42.19, -35.16, -28.12, -21.09, -14.06, -7.03, 0, 7.03, 14.06, 21.09, 28.13, 35.16, 42.19, 49.22, 56.25, 63.28, 70.31, 75, 75, 75, 75, 75, 75, 75, 75, 75, 75, 75, 70.31, 63.28, 56.25, 49.22, 42.19, 35.16, 28.13, 21.09, 14.06, 7.03, 0],
        }
      ],
    },
  ],
  connectionPoints: {
    left: [
      { active: false, direction: 'input' },
      { active: true, direction: 'input', cpIndex: 0 },
      { active: false, direction: 'input' },
    ],
    right: [
      { active: true, direction: 'output', cpIndex: 0 },
      { active: false, direction: 'input' },
      { active: true, direction: 'output', cpIndex: 1 },
    ],
  },
  initialNodes: [
    { id: '07ebd0c5-a33a-4925-a95e-3154e9d9f326', type: 'diverter', position: { col: 30, row: 10 }, params: {"fade":0}, inputCount: 2, outputCount: 2 },
  ],
};

export const DELAY: PuzzleDefinition = {
  id: 'delay',
  title: 'Delay',
  description: 'Use the square wave to control the diverter, use delay to line up the waveforms.',
  activeInputs: 2,
  activeOutputs: 2,
  allowedNodes: ['inverter', 'mixer', 'amp', 'diverter', 'polarizer', 'shifter'],
  testCases: [
    {
      name: 'Delay',
      inputs: [
        {
          shape: 'sawtooth-quarter',
          amplitude: 100,
          period: 64,
          phase: 0,
          offset: 0,
        },
        {
          shape: 'sine-full-reduced',
          amplitude: 100,
          period: 256,
          phase: 0,
          offset: 0,
        }
      ],
      expectedOutputs: [
        {
          shape: 'samples',
          amplitude: 100,
          period: 256,
          phase: 0,
          offset: 0,
          samples: [-96.87, -93.75, -90.62, -87.5, -84.37, -81.25, -78.12, -75, -71.87, -68.75, -65.62, -62.5, -59.37, -56.25, -53.12, -50, -46.87, -43.75, -40.62, -37.5, -34.37, -31.25, -28.12, -25, -21.87, -18.75, -15.62, -12.5, -9.37, -6.25, -3.12, 0, 3.13, 6.25, 9.38, 12.5, 15.63, 18.75, 21.88, 25, 28.13, 31.25, 34.38, 37.5, 40.63, 43.75, 46.88, 50, 53.13, 56.25, 59.38, 62.5, 65.63, 68.75, 71.88, 75, 78.13, 81.25, 84.38, 87.5, 90.63, 93.75, 96.88, -100, -96.87, -93.75, -90.62, -87.5, -84.37, -81.25, -78.12, -75, -71.87, -68.75, -65.62, -62.5, -59.37, -56.25, -53.12, -50, -46.87, -43.75, -40.62, -37.5, -34.37, -31.25, -28.12, -25, -21.87, -18.75, -15.62, -12.5, -9.37, -6.25, -3.12, 0, 3.13, 6.25, 9.38, 12.5, 15.63, 18.75, 21.88, 25, 28.13, 31.25, 34.38, 37.5, 40.63, 43.75, 46.88, 50, 53.13, 56.25, 59.38, 62.5, 65.63, 68.75, 71.88, 75, 78.13, 81.25, 84.38, 87.5, 90.63, 93.75, 96.88, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, -100],
        },
        {
          shape: 'samples',
          amplitude: 100,
          period: 256,
          phase: 0,
          offset: 0,
          samples: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, -100, -96.87, -93.75, -90.62, -87.5, -84.37, -81.25, -78.12, -75, -71.87, -68.75, -65.62, -62.5, -59.37, -56.25, -53.12, -50, -46.87, -43.75, -40.62, -37.5, -34.37, -31.25, -28.12, -25, -21.87, -18.75, -15.62, -12.5, -9.37, -6.25, -3.12, 0, 3.13, 6.25, 9.38, 12.5, 15.63, 18.75, 21.88, 25, 28.13, 31.25, 34.38, 37.5, 40.63, 43.75, 46.88, 50, 53.13, 56.25, 59.38, 62.5, 65.63, 68.75, 71.88, 75, 78.13, 81.25, 84.38, 87.5, 90.63, 93.75, 96.88, -100, -96.87, -93.75, -90.62, -87.5, -84.37, -81.25, -78.12, -75, -71.87, -68.75, -65.62, -62.5, -59.37, -56.25, -53.12, -50, -46.87, -43.75, -40.62, -37.5, -34.37, -31.25, -28.12, -25, -21.87, -18.75, -15.62, -12.5, -9.37, -6.25, -3.12, 0, 3.13, 6.25, 9.38, 12.5, 15.63, 18.75, 21.88, 25, 28.13, 31.25, 34.38, 37.5, 40.63, 43.75, 46.88, 50, 53.13, 56.25, 59.38, 62.5, 65.63, 68.75, 71.88, 75, 78.13, 81.25, 84.38, 87.5, 90.63, 93.75, 96.88, 0],
        }
      ],
    },
  ],
  connectionPoints: {
    left: [
      { active: false, direction: 'input' },
      { active: true, direction: 'input', cpIndex: 0 },
      { active: true, direction: 'input', cpIndex: 1 },
    ],
    right: [
      { active: true, direction: 'output', cpIndex: 0 },
      { active: false, direction: 'input' },
      { active: true, direction: 'output', cpIndex: 1 },
    ],
  },
  initialNodes: [],
};

export const LEVEL_1: PuzzleDefinition = {
  id: 'level-1',
  title: 'Level 1',
  description: '',
  activeInputs: 2,
  activeOutputs: 2,
  allowedNodes: null,
  testCases: [
    {
      name: 'Level 1',
      inputs: [
        {
          shape: 'sawtooth-quarter',
          amplitude: 100,
          period: 64,
          phase: 0,
          offset: 0,
        },
        {
          shape: 'sawtooth-half',
          amplitude: 100,
          period: 128,
          phase: 0,
          offset: 0,
        }
      ],
      expectedOutputs: [
        {
          shape: 'samples',
          amplitude: 100,
          period: 256,
          phase: 0,
          offset: 0,
          samples: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1.56, 3.91, 6.25, 8.59, 10.94, 13.28, 15.63, 17.97, 20.31, 22.66, 25, 27.34, 29.69, 32.03, 34.38, 36.72, 39.06, 41.41, 43.75, 46.09, 48.44, 50.78, 53.13, 55.47, 57.81, 60.16, 62.5, 64.84, 67.19, 69.53, 71.88, 74.22, 76.56, 78.91, 81.25, 83.59, 85.94, 88.28, 90.63, 92.97, 95.31, 97.66, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.78, 3.13, 5.47, 7.81, 10.16, 12.5, 14.84, 17.19, 19.53, 21.88, 24.22, 26.56, 28.91, 31.25, 33.59, 35.94, 38.28, 40.63, 42.97, 45.31, 47.66, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1.56, 3.91, 6.25, 8.59, 10.94, 13.28, 15.63, 17.97, 20.31, 22.66, 25, 27.34, 29.69, 32.03, 34.38, 36.72, 39.06, 41.41, 43.75, 46.09, 48.44, 50.78, 53.13, 55.47, 57.81, 60.16, 62.5, 64.84, 67.19, 69.53, 71.88, 74.22, 76.56, 78.91, 81.25, 83.59, 85.94, 88.28, 90.63, 92.97, 95.31, 97.66, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.78, 3.13, 5.47, 7.81, 10.16, 12.5, 14.84, 17.19, 19.53, 21.88, 24.22, 26.56, 28.91, 31.25, 33.59, 35.94, 38.28, 40.63, 42.97, 45.31, 47.66, 0],
        },
        {
          shape: 'samples',
          amplitude: 100,
          period: 256,
          phase: 0,
          offset: 0,
          samples: [-47.66, -45.31, -42.97, -40.62, -38.28, -35.94, -33.59, -31.25, -28.91, -26.56, -24.22, -21.87, -19.53, -17.19, -14.84, -12.5, -10.16, -7.81, -5.47, -3.12, -0.78, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, -100, -97.66, -95.31, -92.97, -90.62, -88.28, -85.94, -83.59, -81.25, -78.91, -76.56, -74.22, -71.87, -69.53, -67.19, -64.84, -62.5, -60.16, -57.81, -55.47, -53.12, -50.78, -48.44, -46.09, -43.75, -41.41, -39.06, -36.72, -34.37, -32.03, -29.69, -27.34, -25, -22.66, -20.31, -17.97, -15.62, -13.28, -10.94, -8.59, -6.25, -3.91, -1.56, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, -50, -47.66, -45.31, -42.97, -40.62, -38.28, -35.94, -33.59, -31.25, -28.91, -26.56, -24.22, -21.87, -19.53, -17.19, -14.84, -12.5, -10.16, -7.81, -5.47, -3.12, -0.78, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, -100, -97.66, -95.31, -92.97, -90.62, -88.28, -85.94, -83.59, -81.25, -78.91, -76.56, -74.22, -71.87, -69.53, -67.19, -64.84, -62.5, -60.16, -57.81, -55.47, -53.12, -50.78, -48.44, -46.09, -43.75, -41.41, -39.06, -36.72, -34.37, -32.03, -29.69, -27.34, -25, -22.66, -20.31, -17.97, -15.62, -13.28, -10.94, -8.59, -6.25, -3.91, -1.56, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, -50],
        }
      ],
    },
  ],
  connectionPoints: {
    left: [
      { active: false, direction: 'input' },
      { active: true, direction: 'input', cpIndex: 0 },
      { active: true, direction: 'input', cpIndex: 1 },
    ],
    right: [
      { active: false, direction: 'input' },
      { active: true, direction: 'output', cpIndex: 0 },
      { active: true, direction: 'output', cpIndex: 1 },
    ],
  },
};



// =============================================================================
// TUTORIAL LEVELS
// Created via Creative Mode > Export
// =============================================================================

// Paste exported tutorial level definitions below.
// Each level should be a named export of type PuzzleDefinition.
//
// Example format:
//
// export const TUTORIAL_EXAMPLE: PuzzleDefinition = {
//   id: 'tutorial-example',
//   title: 'Example',
//   description: 'Description of what the player needs to do.',
//   activeInputs: 1,
//   activeOutputs: 1,
//   allowedNodes: null,  // or ['mix', 'multiply', ...] to restrict
//   testCases: [
//     {
//       name: 'Test Case 1',
//       inputs: [
//         { shape: 'sine', amplitude: 100, period: 64, phase: 0, offset: 0 },
//       ],
//       expectedOutputs: [
//         {
//           shape: 'samples',
//           amplitude: 100,
//           period: 256,
//           phase: 0,
//           offset: 0,
//           samples: [/* ... paste sample array here ... */],
//         },
//       ],
//     },
//   ],
//   // Optional: custom connection point layout
//   // connectionPoints: {
//   //   left: [
//   //     { active: false, direction: 'input' },
//   //     { active: true, direction: 'input', cpIndex: 0 },
//   //     { active: false, direction: 'input' },
//   //   ],
//   //   right: [
//   //     { active: false, direction: 'input' },
//   //     { active: true, direction: 'output', cpIndex: 0 },
//   //     { active: false, direction: 'input' },
//   //   ],
//   // },
// };
